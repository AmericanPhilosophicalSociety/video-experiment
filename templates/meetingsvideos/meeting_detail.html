{% extends "meetingsvideos/base.html" %}

{% block main %}
<div class="container" id="video-container">
  <h1>{{ meeting.display_date }}</h1>
  {% if videos|length > 0 %}
  <ul class="nav nav-tabs" hx-target
  hx-on:htmx-after-on-load="let currentTab = document.querySelector('[aria-selected=true]');
                            console.log(currentTab)
                            currentTab.setAttribute('aria-selected', 'false')
                            currentTab.classList.remove('active')
                            currentTab.removeAttribute('aria-current')
                            let newTab = event.target
                            newTab.setAttribute('aria-current', 'page')
                            newTab.setAttribute('aria-selected', 'true')
                            newTab.classList.add('active')">
{% for date in dates %}
  {% if forloop.first %}
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" aria-selected="true" hx-get="{{ request.path }}?q={{ date|date:'Y-m-d' }}" hx-target=".meetings-videos" hx-push-url="true">{{ date|date:"F j, Y" }}</a>
    </li>
  {% else %}
    <li class="nav-item">
      <a class="nav-link" aria-selected="false" hx-get="{{ request.path }}?q={{ date|date:'Y-m-d' }}" hx-target=".meetings-videos" hx-push-url="true">{{ date|date:"F j, Y" }}</a>
    </li>
  {% endif %}
{% endfor %}
</ul>
  <div class="meetings-videos">
  {% include "meetingsvideos/meeting-video-list.html" %}
  </div>
{% else %}
<p>No videos are available for this meeting.</p>
<p>{{ meeting.display_notes }}</p>
{% endif %}
</div>
{% endblock %}
{% block extra_js %}
<script>
  jsFunctions.makeActive("meetingsNav");
</script>
{% endblock %}